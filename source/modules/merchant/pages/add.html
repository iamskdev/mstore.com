<div class="add-screen-view">
    <div class="fab-overlay-btn"></div>
    <!-- Horizontal Tabs -->
    <!-- FIX: Moved primary tabs inside the main view for correct layout context -->
        <div class="add-primary-tabs">
            <button class="tab-btn active" data-tab="analytics">Analytics</button>
            <button class="tab-btn" data-tab="transactions">Transactions</button>
            <button class="tab-btn" data-tab="inventory">Inventory</button>
            <button class="tab-btn" data-tab="parties">Parties</button>
            <button class="tab-btn" data-tab="offers">Offers</button>
            <button class="tab-btn" data-tab="banners">Banners</button>
            <button class="tab-btn" data-tab="reports">Reports</button>
            <div class="tab-indicator"></div>
        </div>

    <!-- NEW: Party Filter Panel HTML -->
    <div class="date-filter-overlay" id="party-filter-overlay"></div>
    <div class="date-filter-panel" id="party-filter-panel">
        <div class="date-filter-header">
            <h4>Sort & Filter Parties</h4>
            <button class="date-filter-close-btn" id="party-filter-close-btn">&times;</button>
        </div>
        <div class="filter-section">
            <h5>Sort By</h5>
            <div class="sort-options">
                <label><input type="radio" name="party_sort" value="name_asc" checked> Name (A-Z)</label>
                <label><input type="radio" name="party_sort" value="name_desc"> Name (Z-A)</label>
                <label><input type="radio" name="party_sort" value="due_desc"> Due Amount (High-Low)</label>
                <label><input type="radio" name="party_sort" value="due_asc"> Due Amount (Low-High)</label>
            </div>
        </div>
        <div class="date-filter-actions">
            <button class="date-filter-btn secondary" id="party-filter-reset-btn">Reset</button>
            <button class="date-filter-btn primary" id="party-filter-apply-btn">Apply</button>
        </div>
    </div>

    <!-- NEW: Inventory Filter Panel HTML -->
    <div class="date-filter-overlay" id="inventory-filter-overlay"></div>
    <div class="date-filter-panel" id="inventory-filter-panel">
        <div class="date-filter-header">
            <h4>Sort & Filter Inventory</h4>
            <button class="date-filter-close-btn" id="inventory-filter-close-btn">&times;</button>
        </div>
        <div class="filter-section">
            <h5>Sort By</h5>
            <div class="sort-options">
                <!-- REVISED: Added more sorting options -->
                <label><input type="radio" name="inventory_sort" value="stock_desc" checked> Stock (High-Low)</label>
                <label><input type="radio" name="inventory_sort" value="stock_asc"> Stock (Low-High)</label>
                <label><input type="radio" name="inventory_sort" value="name_asc"> Name (A-Z)</label>
                <label><input type="radio" name="inventory_sort" value="name_desc"> Name (Z-A)</label>
                <label><input type="radio" name="inventory_sort" value="price_desc"> Price (High-Low)</label>
                <label><input type="radio" name="inventory_sort" value="price_asc"> Price (Low-High)</label>
                <label><input type="radio" name="inventory_sort" value="discount_desc"> Discount (High-Low)</label>
            </div>
        </div>
        <div class="date-filter-actions">
            <button class="date-filter-btn secondary" id="inventory-filter-reset-btn">Reset</button>
            <button class="date-filter-btn primary" id="inventory-filter-apply-btn">Apply</button>
        </div>
    </div>

    <!-- NEW: Date Filter Panel HTML -->
    <div class="date-filter-overlay" id="date-filter-overlay"></div>
    <div class="date-filter-panel" id="date-filter-panel">
        <div class="date-filter-header">
            <h4>Filter by Date</h4>
            <button class="date-filter-close-btn" id="date-filter-close-btn">&times;</button>
        </div>
        <div class="date-filter-options">
            <button class="date-filter-btn" data-range="today">Today</button>
            <button class="date-filter-btn" data-range="yesterday">Yesterday</button>
            <button class="date-filter-btn" data-range="this_week">This Week</button>
            <button class="date-filter-btn" data-range="this_month">This Month</button>
        </div>
        <div class="date-filter-custom-range">
            <div class="date-input-display" id="date-display-start">
                <span>Start Date</span>
                <i class="fas fa-calendar-alt"></i>
            </div>
            <input type="date" id="date-filter-start" aria-label="Start Date">
        </div>
        <div class="date-filter-custom-range">
            <div class="date-input-display" id="date-display-end">
                <span>End Date</span>
                <i class="fas fa-calendar-alt"></i>
            </div>
            <input type="date" id="date-filter-end" aria-label="End Date">
        </div>
        <div class="date-filter-actions">
            <button class="date-filter-btn secondary" id="date-filter-reset-btn">Reset</button>
            <button class="date-filter-btn primary" id="date-filter-apply-btn">Apply</button>
        </div>
    </div>

    <!-- Content Panes -->
    <div class="add-screen-content">
        <!-- Analytics Pane -->
        <div class="add-scrollable-content" data-tab="analytics">
            <div class="content-filter-bar">
                <button class="filter-btn active" data-analytics-filter="today">Today</button>
                <button class="filter-btn" data-analytics-filter="this_week">This Week</button>
                <button class="filter-btn" data-analytics-filter="this_month">This Month</button>
                <button class="filter-btn" data-analytics-filter="this_year">This Year</button>
                <button class="filter-btn filter-helper-only" data-analytics-filter="advanced" title="Advanced Filters"><i class="fas fa-filter"></i></button>
            </div>
            <div class="content-scrollable-area">
                <!-- Embed merchant analytics dashboard -->
                <main class="anls-container">
                    <!-- Key Metrics Cards - Rectangular -->
                    <section class="anls-metrics-grid">
                      <!-- Total Revenue Card -->
                      <div class="anls-metric-card anls-revenue-card">
                        <div class="anls-metric-header">
                          <h3 class="anls-metric-title" lang-key="total_revenue">
                            Total Revenue
                          </h3>
                          <span class="anls-trend-badge anls-positive">+12.5%</span>
                        </div>
                        <div class="anls-metric-value">â‚¹25,480</div>
                        <div class="anls-metric-comparison">
                          <span class="anls-comparison-text">$55,120 vs. average</span>
                          <span class="anls-average-score">71.50 for average</span>
                        </div>
                        <div class="anls-mini-chart">
                          <div class="anls-chart-bar" style="width: 0%; height: 100%"></div>
                        </div>
                      </div>
                  
                      <!-- Profit Card -->
                      <div class="anls-metric-card anls-profit-card">
                        <div class="anls-metric-header">
                          <h3 class="anls-metric-title" lang-key="profit">Profit</h3>
                          <span class="anls-trend-badge anls-negative">-5%</span>
                        </div>
                        <div class="anls-metric-value">â‚¹6,220</div>
                        <div class="anls-metric-comparison">
                          <span class="anls-comparison-text">22% profit â–¼ average</span>
                          <span class="anls-average-range">27% - 18% for average</span>
                        </div>
                      </div>
                  
                      <!-- Overdue Card -->
                      <div class="anls-metric-card anls-overdue-card">
                        <div class="anls-metric-header">
                          <h3 class="anls-metric-title" lang-key="overdue_payments">Overdue</h3>
                        </div>
                        <div class="anls-metric-value">â‚¹38,300</div>
                        <div class="anls-metric-comparison">
                          <span>Rohan Verma</span><br />
                          <span class="anls-secondary-text">Global Distributors</span>
                        </div>
                        <label class="anls-checkbox-label">
                          <span>Payable > Receivable</span>
                          <input type="checkbox" id="overdue-checkbox" />
                        </label>
                      </div>
                  
                      <!-- Money Flow Card -->
                      <div class="anls-metric-card anls-moneyflow-card">
                        <div class="anls-metric-header">
                          <h3 class="anls-metric-title" lang-key="money_flow">Money Flow</h3>
                        </div>
                  
                        <!-- Receivable Section -->
                        <div class="anls-moneyflow-section">
                          <div class="anls-moneyflow-header">
                            <h4 class="anls-moneyflow-title">Receivable</h4>
                            <span class="anls-moneyflow-amount">â‚¹38,300</span>
                          </div>
                          <div class="anls-moneyflow-details">
                            <div class="anls-moneyflow-item">
                              <span class="anls-moneyflow-label">Collected</span>
                              <span class="anls-moneyflow-value">â‚¹21,000</span>
                            </div>
                            <div class="anls-moneyflow-item">
                              <span class="anls-moneyflow-label">Pending</span>
                              <span class="anls-moneyflow-value anls-pending">â‚¹17,300</span>
                            </div>
                          </div>
                        </div>
                  
                        <!-- Payable Section -->
                        <div class="anls-moneyflow-section">
                          <div class="anls-moneyflow-header">
                            <h4 class="anls-moneyflow-title">Payable</h4>
                            <span class="anls-moneyflow-amount">â‚¹56,800</span>
                          </div>
                          <div class="anls-moneyflow-details">
                            <div class="anls-moneyflow-item">
                              <span class="anls-moneyflow-label">Paid</span>
                              <span class="anls-moneyflow-value">â‚¹28,000</span>
                            </div>
                            <div class="anls-moneyflow-item">
                              <span class="anls-moneyflow-label">Pending</span>
                              <span class="anls-moneyflow-value anls-pending">â‚¹28,800</span>
                            </div>
                          </div>
                        </div>
                  
                        <div class="anls-moneyflow-summary">
                          <span>Payable > Receivable</span>
                          <span class="anls-moneyflow-negative">-â‚¹18,500</span>
                        </div>
                      </div>
                  
                      <!-- Expenditure Card -->
                      <div class="anls-metric-card anls-expenditure-card">
                        <div class="anls-metric-header">
                          <h3 class="anls-metric-title" lang-key="total_expenditure">
                            Total Expenditure
                          </h3>
                          <span class="anls-trend-badge anls-negative">-8.2%</span>
                        </div>
                        <div class="anls-metric-value">â‚¹18,750</div>
                        <div class="anls-metric-comparison">
                          <span class="anls-comparison-text">Cost reduction goal: â‚¹15,000</span>
                          <span class="anls-average-score">25% below average</span>
                        </div>
                        <div class="anls-mini-chart">
                          <div class="anls-chart-bar" style="width: 0%; height: 100%"></div>
                        </div>
                      </div>
                  
                      <!-- Inventory Health Card -->
                      <div class="anls-metric-card anls-inventory-card">
                        <div class="anls-metric-header">
                          <h3 class="anls-metric-title" lang-key="inventory_health">
                            Inventory Health
                          </h3>
                        </div>
                        <div class="anls-metric-value">â‚¹3,62,500</div>
                        <div class="anls-metric-comparison">Total inventory value</div>
                  
                        <div class="anls-inventory-chart">
                          <div class="anls-scale-labels">
                            <span>0</span>
                            <span>300K</span>
                            <span>600K</span>
                          </div>
                          <div class="anls-chart-bar-container">
                            <div class="anls-chart-main-bar" style="width: 60.4%">
                              <span class="anls-chart-current">362.5K</span>
                            </div>
                          </div>
                        </div>
                      </div>
                  
                      <!-- Sales Performance Card -->
                      <div class="anls-metric-card anls-sales-card">
                        <div class="anls-metric-header">
                          <h3 class="anls-metric-title" lang-key="sales_performance">
                            Sales Performance
                          </h3>
                        </div>
                        <div class="anls-sales-chart-container">
                          <canvas id="anls-sales-chart"></canvas>
                        </div>
                        <div class="anls-sales-note">ðŸ“‰ Sales dipped on Tueâ€“Wed.</div>
                      </div>
                    </section>
                  
                    <!-- Charts Section -->
                    <section class="anls-charts-section">
                      <div class="anls-chart-container anls-revenue-container">
                        <div class="anls-chart-header">
                          <h3 class="anls-chart-title">Revenue Trend (Last 30 Days)</h3>
                          <div class="anls-chart-actions">
                            <button class="anls-btn active" data-chart="revenue">Revenue</button>
                            <button class="anls-btn" data-chart="orders">Orders</button>
                            <button class="anls-btn" data-chart="customers">Customers</button>
                          </div>
                        </div>
                        <div class="anls-chart-content anls-revenue-chart-content">
                          <canvas id="anls-revenue-chart"></canvas>
                        </div>
                      </div>
                  
                      <div class="anls-chart-container anls-category-container">
                        <div class="anls-chart-header">
                          <h3 class="anls-chart-title">Category Distribution</h3>
                        </div>
                        <div class="anls-chart-content anls-category-chart-content">
                          <canvas id="anls-category-chart"></canvas>
                        </div>
                      </div>
                    </section>
                  
                    <!-- Tables Section -->
                    <section class="anls-tables-section">
                      <div class="anls-table-container">
                        <div class="anls-table-header">
                          <h3 class="anls-table-title">Top Products</h3>
                          <button class="anls-btn anls-view-all-btn">View All â†’</button>
                        </div>
                        <div class="anls-table-content">
                          <table class="anls-data-table">
                            <thead>
                              <tr>
                                <th>Product</th>
                                <th>Sales</th>
                                <th>Revenue</th>
                                <th>Growth</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>Premium Widget X</td>
                                <td>1,245 units</td>
                                <td>â‚¹84,500</td>
                                <td class="anls-growth-positive">+24%</td>
                              </tr>
                              <tr>
                                <td>Basic Gadget Y</td>
                                <td>892 units</td>
                                <td>â‚¹42,300</td>
                                <td class="anls-growth-positive">+12%</td>
                              </tr>
                              <tr>
                                <td>Deluxe Tool Z</td>
                                <td>567 units</td>
                                <td>â‚¹67,800</td>
                                <td class="anls-growth-negative">-5%</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                  
                      <div class="anls-table-container">
                        <div class="anls-table-header">
                          <h3 class="anls-table-title">Recent Transactions</h3>
                          <button class="anls-btn anls-view-all-btn">View All â†’</button>
                        </div>
                        <div class="anls-table-content">
                          <table class="anls-data-table">
                            <thead>
                              <tr>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Amount</th>
                                <th>Status</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>2024-01-15</td>
                                <td>Global Distributors</td>
                                <td>â‚¹38,300</td>
                                <td>
                                  <span class="anls-status-badge anls-status-overdue"
                                    >Overdue</span
                                  >
                                </td>
                              </tr>
                              <tr>
                                <td>2024-01-14</td>
                                <td>Tech Solutions Inc</td>
                                <td>â‚¹21,000</td>
                                <td>
                                  <span class="anls-status-badge anls-status-paid">Paid</span>
                                </td>
                              </tr>
                              <tr>
                                <td>2024-01-13</td>
                                <td>Retail Chain Corp</td>
                                <td>â‚¹56,800</td>
                                <td>
                                  <span class="anls-status-badge anls-status-pending"
                                    >Pending</span
                                  >
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </section>
                  </main>
            </div>
        </div>

        <!-- Transactions Pane -->
        <div class="add-scrollable-content" data-tab="transactions">
            <div class="content-filter-bar">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="sale">Sales</button>
                <button class="filter-btn" data-filter="purchase">Purchases</button>
                <button class="filter-btn" data-filter="due">Dues</button>
                <button class="filter-btn filter-helper-only" data-filter="date" title="Filter by Date"><i
                        class="fas fa-calendar-alt"></i></button>
            </div>
            <!-- NEW: Scrollable content area -->
            <div class="content-scrollable-area">
                <div id="transaction-list-container" class="list-container">
                    <!-- Transaction cards will be dynamically injected here -->
                </div>
            </div>
        </div>

        <!-- Inventory Pane -->
        <div class="add-scrollable-content" data-tab="inventory">
            <!-- NEW: Inventory Filter Bar -->
            <div class="content-filter-bar">
                <button class="filter-btn active" data-inventory-filter="all">All</button>
                <button class="filter-btn" data-inventory-filter="product">Products</button>
                <button class="filter-btn" data-inventory-filter="service">Services</button>
                <button class="filter-btn filter-helper-only" data-inventory-filter="advanced"
                    title="Advanced Filters"><i class="fas fa-filter"></i></button>
            </div>
            <div class="content-scrollable-area">
                <div id="inventory-list-container" class="list-container">
                    <!-- Inventory cards will be dynamically injected here -->
                </div>
            </div>
        </div>

        <!-- Parties Pane (NEW) -->
        <div class="add-scrollable-content" data-tab="parties">
            <div class="content-filter-bar">
                <button class="filter-btn active" data-party-filter="all">All</button>
                <button class="filter-btn" data-party-filter="customer">Customers</button>
                <button class="filter-btn" data-party-filter="supplier">Suppliers</button>
                <button class="filter-btn filter-helper-only" data-party-filter="advanced" title="Advanced Filters"><i
                        class="fas fa-filter"></i></button>
            </div>
            <div class="content-scrollable-area">
                <div id="party-list-container" class="list-container">
                    <!-- Party cards will be dynamically injected here -->
                </div>
            </div>
        </div>

        <!-- Offers Pane -->
        <div class="add-scrollable-content" data-tab="offers">
            <div class="content-filter-bar">
                <button class="filter-btn active" data-offer-filter="all">All</button>
                <button class="filter-btn" data-offer-filter="active">Active</button>
                <button class="filter-btn" data-offer-filter="scheduled">Scheduled</button>
                <button class="filter-btn" data-offer-filter="expired">Expired</button>
            </div>
            <div class="content-scrollable-area">
                <div class="content-card">
                    <div class="content-card-icon"><i class="fa-solid fa-tag"></i></div>
                    <div class="content-card-details">
                        <div class="content-card-title">DIWALI20</div>
                        <div class="content-card-subtitle">20% off on all items. Expires in 3 days.</div>
                    </div>
                </div>
                <div class="content-card">
                    <div class="content-card-icon"><i class="fa-solid fa-percent"></i></div>
                    <div class="content-card-details">
                        <div class="content-card-title">Weekend Flash Sale</div>
                        <div class="content-card-subtitle">Flat 50% off on electronics.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Banners Pane -->
        <div class="add-scrollable-content" data-tab="banners">
            <div class="content-filter-bar">
                <button class="filter-btn active" data-banner-filter="all">All</button>
                <button class="filter-btn" data-banner-filter="active">Active</button>
                <button class="filter-btn" data-banner-filter="pending">Pending</button>
                <button class="filter-btn" data-banner-filter="expired">Expired</button>
            </div>
            <div class="content-scrollable-area">
                <div class="placeholder-content">
                    <i class="fa-solid fa-images"></i>
                    <p>No active banners.<br>Click the '+' button to add a new banner.</p>
                </div>
            </div>
        </div>

        <!-- Reports Pane -->
        <div class="add-scrollable-content" data-tab="reports">
            <div class="content-filter-bar">
                <button class="filter-btn active" data-report-filter="overview">Overview</button>
                <button class="filter-btn" data-report-filter="sales">Sales</button>
                <button class="filter-btn" data-report-filter="inventory">Inventory</button>
                <button class="filter-btn" data-report-filter="parties">Parties</button>
                <button class="filter-btn filter-helper-only" data-report-filter="export" title="Export Report"><i class="fas fa-download"></i></button>
            </div>
            <div class="content-scrollable-area">
                <div class="list-container">
                    <!-- Reports content will be dynamically injected here -->
                    <div class="placeholder-content">
                        <i class="fas fa-file-chart-column"></i>
                        <p>Reports section coming soon...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button & Speed Dial Menu -->
    <div class="fab-container">
        <div class="fab-options">
            <!-- Options will be injected by JS -->
        </div>
        <button class="fab-main">
            <i class="fa-solid fa-plus"></i>
        </button>
    </div>

</div>