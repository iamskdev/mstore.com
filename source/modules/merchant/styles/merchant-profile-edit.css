.form-container {
    width: 100%;
    max-width: 600px; /* Limit width on larger screens */
    margin: 0 auto;
    padding: 0; /* Remove padding to allow progress bar to be full-width */
    background-color: var(--bg-primary);
    color: var(--text-primary);
    box-sizing: border-box;
}

.form-header {
    padding: 1rem 1rem 0 1rem; /* Add padding here instead */
    text-align: center;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 0rem;
}

.form-header h1 {
    margin: 0;
    margin-bottom: 0.5rem; /* Added a small bottom margin for consistent spacing */
    font-size: 1.75rem;
    color: var(--text-primary);
}

.form-header p {
    margin: 0 1rem 1.5rem; /* Removed top margin completely */
    color: var(--text-secondary);
}

#merchant-edit-form {
    padding: 1rem; /* Add padding here instead */
}

/* Progress Bar: fixed to viewport so it remains visible while scrolling */
.progress-bar {
    display: flex;
    justify-content: space-between;
    position: fixed; /* Use fixed so it stays visible regardless of scroll/ancestor stacking */
    top: var(--top-height); /* Adjust via CSS variable if you need an offset (e.g., below a header) */
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 600px; /* Match form max-width so the bar aligns with the form */
    z-index: 9999;
    padding: 0;
    background-color: var(--bg-primary); /* Hide content scrolling underneath */
    border-bottom: none;
    height: 4px; /* Set height to match the progress line */
    box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}

.progress-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    transform: none;
    height: 4px;
    width: 100%;
    background-color: var(--border-color);
    z-index: 1;
}

.progress-bar-line {
    position: absolute;
    top: 0;
    left: 0;
    transform: none;
    height: 4px;
    background-color: var(--accent-primary);
    z-index: 2;
    width: 0%;
    transition: width 0.4s ease;
}

.progress-step {
    /* Hide the steps visually but keep them in the DOM for JS logic */
    display: none;
}

/* Form Steps */
.form-step {
    display: none;
    animation: fadeIn 0.5s;
}

.form-step.form-step-active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.input-group {
    /* REFACTORED: Use padding and border for separation instead of just margin */
    padding-bottom: 1.25rem;
    margin-bottom: 1.25rem;
    border-bottom: 1px solid var(--border-color);
    position: relative; /* Ensure it's a positioning context for child elements */
}

/* NEW: Styles for sectioning within a step */
.form-section {
    margin-bottom: 0.25rem; /* REDUCED: Further decreased margin to reduce gap between sections */
    padding-top: 1rem; /* ADDED: Space above the section title */
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border-color);
}

/* FIX: Remove the bottom border from the last field in any container to prevent double lines */
.form-step > .input-group:last-child,
.form-section > .input-group:last-child,
.form-section > .checkbox-group:last-child {
    border-bottom: none;
}
.form-step .form-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
}
.section-title {
    /* REFACTORED: Added underline style for better visual separation */
    font-size: 1.1rem;
    font-weight: 600; /* Make it a bit bolder */
    color: var(--text-primary); /* Make it darker */    
    margin: 0; /* FIX: Remove individual margin, let parent flexbox handle alignment */
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
    display: inline-block; /* To make the border only as wide as the text */
}

/* NEW: Wrapper for section title and edit icon */
.section-title-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative; /* For the edit button positioning */
    margin-bottom: 1.5rem; /* This provides spacing for sections with an edit icon */
}

.input-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: var(--text-secondary);
}

/* NEW: Wrapper for input and edit icon */
.input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.input-group input,
.input-group select,
.input-group textarea {
    width: 100%;
    padding: 0.875rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    font-size: 1rem;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    box-sizing: border-box;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

input:disabled,
textarea:disabled,
input[type="checkbox"]:disabled + label {
    cursor: default;
}

.input-group input:disabled,
.input-group textarea:disabled {
    background: transparent;
    border-color: transparent;
    padding-left: 0;
    color: var(--text-primary);
}
.input-with-prefix {
    display: flex;
    align-items: center;
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    background-color: var(--bg-tertiary);
    position: relative; /* FIX: Make this a positioning context for the child icon */
}

/* NEW: Make the whole handle box look like one unit */
.input-with-prefix.disabled-style {
    background: transparent; /* Make wrapper transparent */
    border-color: transparent; /* Make wrapper border transparent */
}
.input-with-prefix.disabled-style input {
    padding-left: 0; /* Align text with other inputs */
}

/* FIX: When the input inside is disabled, make the wrapper transparent */
.input-with-prefix:has(input:disabled) {
    background: transparent;
    border-color: transparent;
}

/* FIX: When the input is disabled, remove left padding from the '@' span to align it left */
.input-with-prefix:has(input:disabled) span {
    padding-left: 0;
}


.input-with-prefix span {
    padding: 0.875rem 0 0.875rem 1rem;
    color: var(--text-secondary);
}
.input-with-prefix input {
    border: none;
    background: transparent; /* Make inner input transparent */
    padding-left: 0.25rem;
}

.input-with-prefix input:disabled {
    background-color: transparent;
    padding-left: 0; /* Align with other disabled fields */
}

/* NEW: Positioning for the edit icon inside the wrapper */
.field-edit-btn {
    position: absolute;
    right: 0px;
    top: 14px; /* Position from the top */
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 1rem;
    transition: color 0.2s ease, transform 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    /* REMOVED: The vertical centering transform that caused the issue */
}
.field-edit-btn:hover {
    color: var(--accent-primary);
    transform: scale(1.1); /* Simplified hover transform */
}

/* FIX: Override absolute positioning for icons next to section titles */
.section-title-wrapper .field-edit-btn {
    position: static; /* Let flexbox handle the alignment */
    margin-left: 1rem; /* Add some space between title and icon */
}

/* NEW: Style for the cancel (cross) icon */
.field-edit-btn.fa-times, .cancel-btn {
    color: var(--accent-danger);
    font-size: 1.2rem; /* Make it slightly larger */
}

/* FIX: Prevent double border on handle input */
.input-group input:focus,
.input-group select:focus,
.input-group textarea:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgba(var(--accent-primary-rgb), 0.25);
}
.input-with-prefix input:focus {
    /* Override the general focus style for the input inside the prefix wrapper */
    box-shadow: none;
    border-color: transparent;
}

textarea {
    resize: vertical;
    min-height: 100px;
}

.field-note {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-top: 4px;
}

/* --- NEW: Opening Hours Styles --- */
.opening-hours-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 1rem;
}

.opening-hours-top-actions {
    display: flex;
    justify-content: flex-start; /* FIX: Align button to the right */
    margin-bottom: 0.5rem;
}

.day-row {
    display: grid;
    grid-template-columns: auto 1fr auto;
    grid-template-columns: auto 1fr minmax(0, auto); /* FIX: Allow the time-inputs column to shrink below its content's intrinsic size if needed. */
    align-items: center;
    gap: 12px;
    padding: 8px;
    border-radius: var(--radius);
    background-color: var(--bg-tertiary);
}

.day-row .day-label {
    font-weight: 500;
    color: var(--text-primary);
    margin: 0;
}

.day-row .time-inputs {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
}

.day-row input[type="time"] {
    background-color: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 2px;
    font-size: 0.9rem;
    color: var(--text-primary);
    box-sizing: border-box; /* Ensure padding is included in the element's total width. */
    text-align: center; /* FIX: Center the time text within the input. */
}

.day-row input[type="time"]::-webkit-calendar-picker-indicator {
    filter: invert(var(--icon-invert-value, 0));
    /* FIX: Reduce the gap between the time text and the clock icon. */
    margin-left: 2px;
}

.day-row input[type="time"]:disabled {
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
    border-color: var(--bg-tertiary);
    cursor: not-allowed;
}

.opening-hours-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
}

.btn-link {
    background: none;
    border: none;
    color: var(--accent-primary);
    cursor: pointer;
    font-weight: 600;
    font-size: 0.85rem;
    padding: 0;
}
.btn-link:disabled {
    color: var(--text-secondary);
    cursor: not-allowed;
}

/* NEW: Styles for checkbox groups */
.checkbox-group {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
}
.checkbox-group input[type="checkbox"] {
    width: auto;
    margin-right: 10px;
    accent-color: var(--accent-primary); /* Modern way to color checkboxes */
}
.checkbox-group {
    padding-bottom: 1.25rem;
    border-bottom: 1px solid var(--border-color);
}
.checkbox-group label {
    margin-bottom: 0; /* Override default label margin */
}

/* Simpler checkbox group for opening hours actions */
.checkbox-group.simple label {
    margin-bottom: 0; /* Override default label margin */
}

.form-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
}

.btn {
    padding: 0.8rem 1.5rem;
    border: none;
    border-radius: var(--radius);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1rem;
}

.btn-prev {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.btn-prev:hover {
    background-color: #3c3c3c;
}

.btn-next {
    background-color: var(--accent-primary);
    color: white;
}

.btn-next:hover {
    background-color: var(--accent-primary-hover);
}

.btn:disabled {
    background-color: var(--border-color);
    cursor: not-allowed;
}
/* Profile Images Section */
.media-profile-container {
    position: relative;
    height: 100px; /* Adjust height as needed */
    margin-bottom: 80px; /* Space for the overlapping logo */
}

.media-profile-container .cover-image-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    background-color: #e0e0e0; /* Placeholder color */
    border-radius: 0;
    overflow: hidden;
}

.media-profile-container .cover-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.media-profile-container .logo-image-wrapper {
    position: absolute;
    bottom: -50px; /* Overlap adjustment */
    left: 55px;
    transform: translateX(-50%);
    width: 90px;
    height: 90px;
    border-radius: 50%;
    background-color: #f0f0f0; /* Placeholder color */
    border: 4px solid #fff;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.media-profile-container .logo-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Edit Icons */
.media-profile-container .edit-icon-wrapper {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.5);
    color: #fff;
    cursor: pointer;
    transition: background-color 0.3s;
}

.media-profile-container .edit-icon-wrapper:hover {
    background-color: rgba(0, 0, 0, 0.7);
}

.media-profile-container .edit-icon-wrapper i {
    font-size: 0.75rem;
}

.media-profile-container .cover-edit-icon {
    top: 10px;
    right: 10px;
    width: 25px;
    height: 25px;
    border-radius: 50%;
}

.media-profile-container .logo-edit-icon {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%; /* Ensure it covers the circular logo */
    opacity: 0; /* Hidden by default */
    transition: opacity 0.3s;
}

.media-profile-container .logo-image-wrapper:hover .logo-edit-icon {
    opacity: 1; /* Show on hover */
}

/* Hidden file inputs: keep them in the DOM (not display:none) so programmatic click works reliably
   and allow clickable edit icons to trigger the file picker. We keep them visually hidden but
   not completely removed from layout so some browsers (mobile) allow the file dialog to open. */
.media-profile-container .image-input {
    /* Make the native file input cover the image wrapper so native clicks open
       the file picker reliably (works on mobile & desktop). Keep it invisible
       but clickable. */
    position: absolute;
    inset: 0; /* top:0; right:0; bottom:0; left:0 */
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    border: 0;
    background: transparent;
    opacity: 0;
    cursor: pointer;
    z-index: 5; /* sit above image but below visible edit icon (which has higher z-index) */
}

/* Visible fallback button (label) that opens the file chooser as a real user gesture */
/* Ensure edit icon remains visible above overlays */
.media-profile-container .edit-icon-wrapper {
    z-index: 12;
}

/* (Removed debug button styles) */
