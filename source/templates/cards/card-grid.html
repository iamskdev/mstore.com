<!-- 🔁 Reusable Item Grid Card Component -->
<a class="card" href="{{HREF}}" data-item-id="{{ITEM_ID}}">
  <div class="card-image-wrapper">
    <img
      src="{{IMAGE_SRC}}"
      alt="{{ITEM_NAME}}"
      class="card-img"
      onerror="this.src='{{DEFAULT_IMAGE_SRC}}'"/>
    <button class="wishlist-btn {{#if IS_SAVED}}active{{/if}}">
      <i class="{{HEART_ICON_CLASS}}"></i>
    </button>
  </div>
  <div class="card-info">
    <div class="name">{{ITEM_NAME}}</div>
    <div class="price-container">
      <span class="current-price">₹{{CURRENT_PRICE}}</span>
      <!-- Optional: Only show if ORIGINAL_PRICE is provided -->
      {{#if ORIGINAL_PRICE}}
      <span class="original-price">₹{{ORIGINAL_PRICE}}</span>
      {{/if}}
      <span class="unit">{{UNIT}}</span>
    </div>
    <div class="stock-status {{STOCK_STATUS_CLASS}}">
      <i class="{{STOCK_ICON_CLASS}}"></i> {{STOCK_STATUS_TEXT}}
    </div>
    <div class="rating">
      <div class="stars">{{STARS_HTML}}</div>
      <span class="rating-count">({{RATING_VALUE}})</span>
    </div>
    
    <button class="add-to-cart" {{ADD_TO_CART_DISABLED}}>
      <i class="{{ADD_TO_CART_ICON_CLASS}}"></i> {{ADD_TO_CART_TEXT}}
    </button>
  </div>
</a>

<style>
  /* Modern CSS Reset and Base Styles */

  /* Grid Container */
  .grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 0.5rem;
    max-width: 100%;
    margin: 0 auto;
  }

  /* Modern Card Styles */
  .card {
    display: flex;
    flex-direction: column;
    background: var(--bg-secondary);
    border-radius: 6px;
    overflow: hidden;
    box-shadow: var(--shadow-color);
    transition: all 0.3s ease;
    text-decoration: none;
    color: inherit;
    position: relative;
    height: 100%;
    padding: 0;
  }

  .card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover-card);
  }

  /* Card Image Section */
  .card-image-wrapper {
    box-sizing: border-box; /* Ensures padding is included in the total size */
    aspect-ratio: 1 / 1; /* Modern way to maintain a square shape */
    overflow: hidden;
    margin: 0.25rem;
    background-color: var(--bg-tertiary); /* Placeholder for broken images */
    position: relative; /* Added for correct positioning of wishlist-btn */
  }

  .card-img {
    object-fit: cover;
    aspect-ratio: 1 / 1;
    width: 100%;
  }
 .card-img:hover {
    transform: scale(1.05);
    
  }
  .wishlist-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 28px;
    height: 28px;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-secondary);
    background: transparent; /* Ensure no background */
    box-shadow: none; /* Ensure no box-shadow */
    z-index: 10000000;
   }


  .wishlist-btn:hover {

    color: var(--accent-danger);
    transform: scale(1.1);
  }

  .wishlist-btn.active {
    color: var(--accent-danger);
  }



  .card-info {
    --info-vertical-spacing: 0.2rem; /* Consistent vertical spacing for card items */
    padding: 0.2rem 0.25rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    /* gap: 0.1rem; Removed in favor of margin-bottom on children */
  }

  .name {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: var(--info-vertical-spacing);
    color: var(--text-primary);
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-align: left;
  }

  .price-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: var(--info-vertical-spacing);
  }

  .current-price {
    font-weight: 700;
    color: var(--text-primary);
  }

  .original-price {
    font-size: 0.8rem;
    color: var(--text-tertiary);
    text-decoration: line-through;
  }

  .unit {
    font-size: 0.8rem;
    color: var(--text-secondary);
    white-space: nowrap; /* Prevent unit from wrapping */
  }

  .rating {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    margin-bottom: var(--info-vertical-spacing);
  }

  .stars {
    color: var(--accent-warning);
    font-size: 0.8rem;
  }

  .rating-count {
    font-size: 0.75rem;
    color: var(--text-secondary);
  }

  /* Stars */
  .stars {
    display: inline-block;
    font-size: 14px;
    line-height: 1;
  }
  .stars span {
    color: #ccc; /* empty star */
    display: inline-block;
    position: relative;
  }
  .stars .filled {
    color: #ffb400; /* full star */
  }
  .stars .half {
    color: #ccc;
  }
  .stars .half::before {
    content: "★";
    color: #ffb400;
    position: absolute;
    left: 0;
    width: 50%;
    overflow: hidden;
  }

  .stock-status {
    font-size: 0.75rem;
    font-weight: 600;
    margin-bottom: var(--info-vertical-spacing);
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  .stock-status.in {
    color: var(--accent-success);
  }

  .stock-status.out {
    color: var(--accent-danger);
  }

  

  .add-to-cart {
    background: var(--accent-primary);
    color: var(--accent-text);
    border: none;
    border-radius: 6px;
    margin-bottom: 0.05rem;
    padding: 0.5rem;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-top: auto;
  }

  .add-to-cart:hover {
    background: var(--accent-primary-hover);
  }

  .add-to-cart:disabled {
    background: var(--button-disabled-bg);
    cursor: not-allowed;
  }

  .add-to-cart.added {
    background-color: var(--accent-success); /* Green color */
    color: var(--accent-text);
    cursor: default;
  }

  .add-to-cart.added:hover {
    background-color: var(--accent-success); /* Keep green on hover */
  }


  /* Responsive Design */
  @media (max-width: 640px) {
    .grid-container {
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 0.75rem;
    }

  }

  @media (min-width: 1024px) {
    .grid-container {
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    }
  }

  /* Loading Animation */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card {
    animation: fadeIn 0.5s ease forwards;
  }

  .card:nth-child(2) { animation-delay: 0.1s; }
  .card:nth-child(3) { animation-delay: 0.2s; }
  .card:nth-child(4) { animation-delay: 0.3s; }
  .card:nth-child(5) { animation-delay: 0.4s; }
  .card:nth-child(6) { animation-delay: 0.5s; }
</style>
